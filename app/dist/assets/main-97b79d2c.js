import{c as o,i as d,a as $,s as _,A as w,t as f,o as x,d as y,m as g,b as C,u as E,e as A,S as p,F as z,r as L}from"./api-e1cc6f0a.js";const M=f("<div class=entry_bar><a class=name></a><span class=entry_type>dir"),P=f("<div class=entry_bar><a class=name></a><a class=download_link download>download</a><span class=entry_type>file</span><span class=size> </span><span class=extend_name>");function F(t){return t.is_dir?o(R,t):o(B,t)}function R(t){let r=()=>"/?path="+t.path+"/"+t.file_name;return(()=>{const i=M(),n=i.firstChild;return d(n,()=>t.name),$(e=>{const l=r(),s=t.name;return l!==e._v$&&_(n,"href",e._v$=l),s!==e._v$2&&_(n,"title",e._v$2=s),e},{_v$:void 0,_v$2:void 0}),i})()}function B(t){let r=()=>{let e=t.size;return e>1073741824?Math.floor(e/1073741824*10)/10+" Gb":e>1048576?Math.floor(e/1048576*10)/10+" Mb":e>1024?Math.floor(e/1024*10)/10+" Kb":e},i=()=>"/file_page/?path="+t.path+"/"+t.file_name,n=()=>t.extend_name;return(()=>{const e=P(),l=e.firstChild,s=l.nextSibling,u=s.nextSibling,c=u.nextSibling,k=c.firstChild,S=c.nextSibling;return d(l,()=>t.name),d(c,r,k),d(S,n),$(a=>{const m=i(),v=t.name,b=w.file_root+t.path+"/"+t.name;return m!==a._v$3&&_(l,"href",a._v$3=m),v!==a._v$4&&_(l,"title",a._v$4=v),b!==a._v$5&&_(s,"href",a._v$5=b),a},{_v$3:void 0,_v$4:void 0,_v$5:void 0}),e})()}function j(t,r){const i=n=>{var e;return!t.contains(n.target)&&((e=r())==null?void 0:e())};document.body.addEventListener("click",i),x(()=>document.body.removeEventListener("click",i))}const D=f('<div id=sidebar><button class="full_width no_border_radius">&lt;&lt;&lt;</button><div id=sidebar_link_home><a href=/>home');function G(t){let r=g({width:200,if_show:!0},t),[i,n]=C(r.if_show);return t.ref({setShow:n}),(()=>{const e=D(),l=e.firstChild;return E(j,e,()=>()=>{n(!1),console.log(t.ref),console.log("out")}),l.$$click=()=>{n(!1)},$(s=>{const u=`${r.width}px`,c=!i();return u!==s._v$&&((s._v$=u)!=null?e.style.setProperty("width",u):e.style.removeProperty("width")),c!==s._v$2&&e.classList.toggle("hide",s._v$2=c),s},{_v$:void 0,_v$2:void 0}),e})()}y(["click"]);const I=f("<a>back"),K=f("<div class=top_bar><button id=open_side_bar>side bar"),O=f("<div class=file_display>"),h=(()=>{let r=new URL(window.location.href).searchParams.get("path");return r==null?r="":r.startsWith("/")&&(r=r.slice(1,r.length)),r})(),[U]=A(h,W);async function W(t){let r=await(await fetch(`${w.info_root}${t}`)).json();const i=(n,e)=>n.is_dir&&e.is_file?-1:n.is_file&&e.is_dir?1:n.file_name<e.file_name?-1:n.file_name>e.file_name?1:0;return r.entries.sort(i),r}function q(){let t;const r=()=>{let i=h.split("/");return i.pop(),i.reduce((e,l)=>`${e}/${l}`,"/?path=")};return[(()=>{const i=K(),n=i.firstChild;return n.$$click=()=>{t.setShow(!0)},d(i,o(p,{when:h!=="",get children(){const e=I();return $(()=>_(e,"href",r())),e}}),null),i})(),o(G,{ref(i){const n=t;typeof n=="function"?n(i):t=i},if_show:!1}),(()=>{const i=O();return d(i,o(z,{get each(){var n;return(n=U())==null?void 0:n.entries},children:n=>o(F,g({path:h},n))})),i})()]}y(["click"]);const H=document.getElementById("root");L(()=>o(q,{}),H);
